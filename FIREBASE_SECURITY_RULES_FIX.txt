# ğŸ”´ ZORUNLU: Firebase Security Rules

## Veriler Firebase'e Gitmiyor - Ã‡Ã¶zÃ¼m

Firebase config doÄŸru âœ… ama veriler gitmiyorsa, %99 ihtimalle **Security Rules** sorunu!

---

## âš¡ HÄ±zlÄ± Ã‡Ã¶zÃ¼m (2 Dakika)

### 1. Firebase Console'a Gidin
[Firebase Console](https://console.firebase.google.com) â†’ Projeniz (`gider-uygulamasi`)

### 2. Firestore Database â†’ Rules
Sol menÃ¼den **Firestore Database** â†’ **Rules** sekmesi

### 3. AÅŸaÄŸÄ±daki KurallarÄ± YapÄ±ÅŸtÄ±rÄ±n

**Mevcut tÃ¼m kurallarÄ± silin** ve aÅŸaÄŸÄ±dakini yapÄ±ÅŸtÄ±rÄ±n:

```javascript
rules_version = '2';
service cloud.firestore {
  match /databases/{database}/documents {
    match /{document=**} {
      allow read, write: if request.time < timestamp.date(2025, 12, 31);
    }
  }
}
```

### 4. âš ï¸ "Publish" Butonuna TÄ±klayÄ±n!

**Bu Ã§ok Ã¶nemli!** KurallarÄ± yapÄ±ÅŸtÄ±rdÄ±ktan sonra mutlaka **"Publish"** butonuna tÄ±klayÄ±n. Yoksa kurallar aktif olmaz!

---

## âœ… Test Etme

1. **SayfayÄ± yenileyin** (F5)
2. **Console'u aÃ§Ä±n** (F12)
3. **Yeni entry oluÅŸturun**
4. Console'da ÅŸunu gÃ¶rmelisiniz:
   ```
   ğŸ“¤ Firebase'e kayÄ±t baÅŸlatÄ±lÄ±yor...
   âœ… Entry Firebase'e kaydedildi!
   ```
5. **Firebase Console'da kontrol edin:**
   - Firestore Database â†’ **Data** â†’ `entries` collection

---

## ğŸ” Production Ä°Ã§in (Daha Sonra)

Production'a geÃ§tiÄŸinizde ÅŸu kurallarÄ± kullanÄ±n:

```javascript
rules_version = '2';
service cloud.firestore {
  match /databases/{database}/documents {
    function isAuthenticated() {
      return request.auth != null;
    }
    
    function isOwner(userId) {
      return isAuthenticated() && request.auth.uid == userId;
    }
    
    match /entries/{entryId} {
      allow read, write: if isOwner(resource.data.userId);
      allow create: if isAuthenticated() && request.resource.data.userId == request.auth.uid;
    }
    
    match /entryGroups/{groupId} {
      allow read, write: if isOwner(resource.data.userId);
      allow create: if isAuthenticated() && request.resource.data.userId == request.auth.uid;
    }
    
    match /entryTags/{tagId} {
      allow read, write: if isOwner(resource.data.userId);
      allow create: if isAuthenticated() && request.resource.data.userId == request.auth.uid;
    }
    
    match /recurringConfigs/{configId} {
      allow read, write: if isOwner(resource.data.userId);
      allow create: if isAuthenticated() && request.resource.data.userId == request.auth.uid;
    }
    
    match /exclusions/{exclusionId} {
      allow read, write: if isOwner(resource.data.userId);
      allow create: if isAuthenticated() && request.resource.data.userId == request.auth.uid;
    }
  }
}
```

---

## ğŸ“‹ Kontrol Listesi

- [ ] Firebase Console â†’ Firestore â†’ Rules'a gittim
- [ ] Test mode kurallarÄ±nÄ± yapÄ±ÅŸtÄ±rdÄ±m
- [ ] **"Publish" butonuna tÄ±kladÄ±m** âš ï¸
- [ ] Anonymous Authentication etkin (Authentication â†’ Sign-in method)
- [ ] SayfayÄ± yeniledim
- [ ] Yeni entry oluÅŸturdum
- [ ] Console'da baÅŸarÄ± loglarÄ± gÃ¶rÃ¼yorum
- [ ] Firebase Console'da veriler gÃ¶rÃ¼nÃ¼yor

---

## ğŸ†˜ Hala Ã‡alÄ±ÅŸmÄ±yorsa

Console'da ÅŸu hatalardan birini gÃ¶rÃ¼yorsanÄ±z:

**"permission-denied"**
â†’ Security Rules'Ä± kontrol edin, "Publish" ettiniz mi?

**"unauthenticated"**
â†’ Anonymous Authentication etkin mi? (Authentication â†’ Sign-in method)

**"failed-precondition"**
â†’ Index eksik, Firebase Console'da hata mesajÄ±ndaki linke tÄ±klayÄ±n

